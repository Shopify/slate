machine:
  ruby:
    version: 1.9.3-p385
  node:
    version: 4.6.1

dependencies:
  pre:
    - 'echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc'
    - npm set progress=false
    - npm install -g npm shopify/sass-lint eslint eslint-plugin-shopify eslint-plugin-node jsonlint
  bundler:
    without:
      - benchmark
      - deploy
      - production
      - debug
  cache_directories:
    - .bundle/

test:
  override:
    - bundle exec rspec spec
    - ./node_modules/.bin/slate-tools test
